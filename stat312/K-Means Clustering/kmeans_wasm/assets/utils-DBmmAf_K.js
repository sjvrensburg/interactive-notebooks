import{s as F}from"./chunk-DZLz74EQ.js";import{i as w,n as x,o as r,r as L}from"./react-7g8sREeT.js";import{E as u,F as _,L as S,P as f,V as T,W as V,Y as W,b as o,j as l,w as c,z as t}from"./zod-BEi78Y5d.js";import{n as Y}from"./jsx-runtime-DvsdsEjx.js";import{t as A}from"./merge-DrdmtLTL.js";import{r as z,t as B}from"./invariant-91cSKJcr.js";import{t as m}from"./Logger-BkkOJyg0.js";import{c as G,n as H}from"./hotkeys-CBY41Jr2.js";const j=["pip","uv","rye","poetry","pixi"];var M=["normal","compact","medium","full","columns"],$=["auto","native","polars","lazy-polars","pandas"];const I="openai/gpt-4o";var q=["html","markdown","ipynb"],s=_({api_key:t().optional(),base_url:t().optional()}).loose(),J=_({chat_model:t().nullish(),edit_model:t().nullish(),autocomplete_model:t().nullish(),displayed_models:c(t()).default([]),custom_models:c(t()).default([])});const h=l({completion:_({activate_on_typing:u().prefault(!0),copilot:T([u(),o(["github","codeium","custom"])]).prefault(!1).transform(a=>a===!0?"github":a),codeium_api_key:t().nullish()}).prefault({}),save:l({autosave:o(["off","after_delay"]).prefault("after_delay"),autosave_delay:f().nonnegative().transform(a=>Math.max(a,1e3)).prefault(1e3),format_on_save:u().prefault(!1)}).prefault({}),formatting:l({line_length:f().nonnegative().prefault(79).transform(a=>Math.min(a,1e3))}).prefault({}),keymap:l({preset:o(["default","vim"]).prefault("default"),overrides:S(t(),t()).prefault({}),destructive_delete:u().prefault(!0)}).prefault({}),runtime:l({auto_instantiate:u().prefault(!0),on_cell_change:o(["lazy","autorun"]).prefault("autorun"),auto_reload:o(["off","lazy","autorun"]).prefault("off"),watcher_on_save:o(["lazy","autorun"]).prefault("lazy"),default_sql_output:o($).prefault("auto"),default_auto_download:c(o(q)).prefault([])}).prefault({}),display:l({theme:o(["light","dark","system"]).prefault("light"),code_editor_font_size:f().nonnegative().prefault(14),cell_output:o(["above","below"]).prefault("above"),dataframes:o(["rich","plain"]).prefault("rich"),default_table_page_size:f().prefault(10),default_table_max_columns:f().prefault(50),default_width:o(M).prefault("medium").transform(a=>a==="normal"?"compact":a),locale:t().nullable().optional(),reference_highlighting:u().prefault(!1)}).prefault({}),package_management:l({manager:o(j).prefault("pip")}).prefault({}),ai:l({rules:t().prefault(""),mode:o(["manual","ask"]).prefault("manual"),inline_tooltip:u().prefault(!1),open_ai:s.optional(),anthropic:s.optional(),google:s.optional(),ollama:s.optional(),openrouter:s.optional(),open_ai_compatible:s.optional(),azure:s.optional(),bedrock:l({region_name:t().optional(),profile_name:t().optional(),aws_access_key_id:t().optional(),aws_secret_access_key:t().optional()}).optional(),models:J.prefault({displayed_models:[],custom_models:[]})}).prefault({}),experimental:l({markdown:u().optional(),rtc:u().optional()}).prefault(()=>({})),server:l({}).prefault(()=>({})),sharing:l({html:u().optional(),wasm:u().optional()}).optional(),mcp:l({presets:c(o(["marimo","context7"])).optional()}).optional().prefault({})}).partial().prefault(()=>({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})),E=t(),K=o($).prefault("auto"),y=_({width:o(M).prefault("medium").transform(a=>a==="normal"?"compact":a),app_title:E.nullish(),css_file:t().nullish(),html_head_file:t().nullish(),auto_download:c(o(q)).prefault([]),sql_output:K}).prefault(()=>({width:"medium",auto_download:[],sql_output:"auto"}));function O(a){try{return y.parse(a)}catch(e){return m.error(`Marimo got an unexpected value in the configuration file: ${e}`),y.parse({})}}function N(a){try{let e=h.parse(a);for(let[n,p]of Object.entries(e.experimental??{}))p===!0&&m.log(`\u{1F9EA} Experimental feature "${n}" is enabled.`);return e}catch(e){return e instanceof V?m.error(`Marimo got an unexpected value in the configuration file: ${W(e)}`):m.error(`Marimo got an unexpected value in the configuration file: ${e}`),P()}}function Q(a){try{let e=a;return B(typeof e=="object","internal-error: marimo-config-overrides is not an object"),Object.keys(e).length>0&&m.log("\u{1F527} Project configuration overrides:",e),e}catch(e){return m.error(`Marimo got an unexpected configuration overrides: ${e}`),{}}}function P(){return h.parse({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})}var R=F(Y());const g=r(P()),C=r({}),i=r(a=>{let e=a(C),n=a(g);return A({},n,e)}),U=r(a=>a(i).runtime.auto_instantiate),X=r(a=>a(i).keymap.overrides??{}),Z=r(G()),aa=r(a=>{let e=a(X),n=a(Z);return new H(e,{platform:n})}),ea=r(a=>a(i).save),ta=r(a=>a(i).ai),oa=r(a=>a(i).completion),ra=r(a=>a(i).keymap.preset);function la(){return x(g)}function na(){let a=(0,R.c)(3),e=L(i),n=w(g),p;return a[0]!==e||a[1]!==n?(p=[e,n],a[0]=e,a[1]=n,a[2]=p):p=a[2],p}function ia(){return z.get(i)}const ua=r(a=>D(a(i)));r(a=>a(i).display.code_editor_font_size);const pa=r(a=>a(i).display.locale);function D(a){var e,n,p,v,b,k;return!!((n=(e=a.ai)==null?void 0:e.models)!=null&&n.chat_model)||!!((v=(p=a.ai)==null?void 0:p.models)!=null&&v.edit_model)||!!((k=(b=a.ai)==null?void 0:b.models)!=null&&k.autocomplete_model)}const d=r(O({}));function sa(){return x(d)}function ma(){return w(d)}function fa(){return z.get(d)}const ca=r(a=>a(d).width);function da(){return!1}export{E as C,O as D,h as E,Q as O,y as S,j as T,sa as _,ca as a,la as b,oa as c,ia as d,aa as f,i as g,pa as h,d as i,N as k,C as l,ra as m,ta as n,U as o,D as p,ua as r,ea as s,da as t,fa as u,na as v,I as w,g as x,ma as y};
