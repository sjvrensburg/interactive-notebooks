import{s as h}from"./chunk-DZLz74EQ.js";import{E as x,Xn as g,cr as k,et as I,h as v,ir as y,p as R}from"./cells-Dd1FatlG.js";import{n as b,t as S}from"./jsx-runtime-DvsdsEjx.js";import{t as j}from"./Logger-BkkOJyg0.js";import{a as z}from"./key-D4QiH_7H.js";import{o as D}from"./dist-Bz53xjA5.js";import{t as E}from"./use-toast-D6NNsC80.js";import{r as F}from"./useDeleteCell-CJaipocw.js";import{n as e}from"./useEvent-BOb1a9d1.js";var m=h(b());function H(){let t=(0,m.c)(2),r=u(),o;return t[0]===r?o=t[1]:(o=()=>r(k(v())),t[0]=r,t[1]=o),e(o)}function U(t){let r=(0,m.c)(3),o=u(),n;return r[0]!==t||r[1]!==o?(n=()=>{t!==void 0&&o([t])},r[0]=t,r[1]=o,r[2]=n):n=r[2],e(n)}function V(){let t=(0,m.c)(2),r=u(),o;return t[0]===r?o=t[1]:(o=()=>r(y(v())),t[0]=r,t[1]=o),e(o)}function u(){let t=(0,m.c)(3),{prepareForRun:r}=x(),{sendRun:o}=z(),n;return t[0]!==r||t[1]!==o?(n=async a=>{var l,C,w;if(a.length===0)return;let{cellHandles:s,cellData:f}=v(),i=[];for(let p of a){let c=(C=(l=s[p])==null?void 0:l.current)==null?void 0:C.editorView,d;c?(g(c)!=="markdown"&&D(c),d=I(c)):d=((w=f[p])==null?void 0:w.code)||"",i.push(d),r({cellId:p})}await o({cellIds:a,codes:i}).catch(X)},t[0]=r,t[1]=o,t[2]=n):n=t[2],e(n)}function X(t){j.error(t)}var _=h(b()),q=h(S());function A(){let t=(0,_.c)(3),{splitCell:r,undoSplitCell:o}=x(),n;return t[0]!==r||t[1]!==o?(n=a=>{let s=R(a.cellId);if(!s)return;let f=I(s);r(a);let{dismiss:i}=E({title:"Cell split",action:(0,q.jsx)(F,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{o({...a,snapshot:f}),l()},children:"Undo"})}),l=i},t[0]=r,t[1]=o,t[2]=n):n=t[2],e(n)}export{H as a,u as i,V as n,U as r,A as t};
