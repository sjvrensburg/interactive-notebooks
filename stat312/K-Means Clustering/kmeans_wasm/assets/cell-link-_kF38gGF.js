import{s as _}from"./chunk-DZLz74EQ.js";import{E as N,Mr as b,N as g,Nn as j,j as L,ut as w}from"./cells-Dd1FatlG.js";import{n as S,t as $}from"./jsx-runtime-DvsdsEjx.js";import{t as y}from"./Logger-BkkOJyg0.js";import{t as E}from"./cn-Dr9kMPPj.js";import{t as O}from"./filename-B5Yo1bOu.js";var p=_(S()),v=_($());const k=o=>{let e=(0,p.c)(12),{className:t,cellId:r,variant:l,onClick:s,formatCellName:a,skipScroll:n}=o,u=g()[r]??"",x=L().inOrderIds.indexOf(r),{showCellIfHidden:d}=N(),C=a??A,i;e[0]===t?i=e[1]:(i=E("inline-block cursor-pointer text-link hover:underline",t),e[0]=t,e[1]=i);let c;e[2]!==r||e[3]!==s||e[4]!==d||e[5]!==n||e[6]!==l?(c=h=>{if(r==="__scratch__")return!1;d({cellId:r}),h.stopPropagation(),h.preventDefault(),requestAnimationFrame(()=>{I(r,l,n)&&(s==null||s())})},e[2]=r,e[3]=s,e[4]=d,e[5]=n,e[6]=l,e[7]=c):c=e[7];let f=C(w(u,x)),m;return e[8]!==i||e[9]!==c||e[10]!==f?(m=(0,v.jsx)("div",{className:i,role:"link",tabIndex:-1,onClick:c,children:f}),e[8]=i,e[9]=c,e[10]=f,e[11]=m):m=e[11],m},T=o=>{let e=(0,p.c)(2),t;return e[0]===o?t=e[1]:(t=(0,v.jsx)(k,{...o,variant:"destructive"}),e[0]=o,e[1]=t),t},q=o=>{let e=(0,p.c)(10),{cellId:t,lineNumber:r}=o,l=O(),s;e[0]!==t||e[1]!==r?(s=()=>j(t,r),e[0]=t,e[1]=r,e[2]=s):s=e[2];let a;e[3]!==t||e[4]!==l?(a=u=>t==="__scratch__"?"scratch":`marimo://${l||"untitled"}#cell=${u}`,e[3]=t,e[4]=l,e[5]=a):a=e[5];let n;return e[6]!==t||e[7]!==s||e[8]!==a?(n=(0,v.jsx)(k,{cellId:t,onClick:s,skipScroll:!0,variant:"destructive",className:"traceback-cell-link",formatCellName:a}),e[6]=t,e[7]=s,e[8]=a,e[9]=n):n=e[9],n};function I(o,e,t){let r=b.create(o),l=document.getElementById(r);return l===null?(y.error(`Cell ${r} not found on page.`),!1):(t||l.scrollIntoView({behavior:"smooth",block:"center"}),e==="destructive"&&(l.classList.add("error-outline"),setTimeout(()=>{l.classList.remove("error-outline")},2e3)),e==="focus"&&(l.classList.add("focus-outline"),setTimeout(()=>{l.classList.remove("focus-outline")},2e3)),!0)}function A(o){return o}export{I as i,T as n,q as r,k as t};
